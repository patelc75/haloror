<!-- TODO: this can further be DRYed -->

<% if @confirmation.blank? || (@product == "complete") %>
<div id="halo_complete_box" style="display: block; float:left; margin-top: 20px; width: 100%">
  <table width="100%" class="colored">
    <tr><th>Shopping cart items</th><th style="text-align:right;">Price</th></tr>
    <tr><td>Deposit</td><td style="text-align:right;"><%= @complete_tariff.blank? ? '?' : USD_value(@complete_tariff.deposit) %></td></tr>
    <% unless @complete_tariff.blank? || @complete_tariff.months_advance.to_i.zero? %>
      <tr class="altrow"><td><%= pluralize(@complete_tariff.months_advance, "month") %> advance (<%= USD_value(@complete_tariff.monthly_recurring) %> x <%= @complete_tariff.months_advance %>)</td><td style="text-align:right;"><%= USD_value(@complete_tariff.advance_charge) %></td></tr>
    <% end -%>
    <% unless @complete_tariff.blank? || @complete_tariff.months_trial.to_i.zero? %>
      <tr class="altrow red"><td><%= pluralize(@complete_tariff.months_trial, "month") %> trial (Free <%= USD_value(@complete_tariff.monthly_recurring) %> x <%= @complete_tariff.months_trial %>)</td><td style="text-align:right;"><%= USD_value(0) %></td></tr>
    <% end -%>
    <tr><td>Shipping</td><td style="text-align:right;"><%= @complete_tariff.blank? ? '?' : USD_value(@complete_tariff.shipping) %></td></tr>
    <tr class="altrow"><td style="text-align:right;">Total*</td><td style="text-align:right;">
      <% if @confirmation %>
      <%= f.hidden_field "cost", :disabled => true %>
      <% end -%>
      <strong><%= @complete_tariff.blank? ? '?' : USD_value(@complete_tariff.upfront_charge) %></strong>
    </td></tr>
  </table>
  <p>
    <!-- #*Note: Recurring monthly charge of <b><%= @complete_tariff.blank? ? '?' : USD_value(@complete_tariff.monthly_recurring.to_i) %>/mo</b> will begin <%= @complete_tariff.blank? ? '?' : @complete_tariff.recurring_delay.to_i.months.from_now.to_s(:day_date) %> -->
    <span class="tiny">*<b>Note</b>: A one-time prorated charge will be charged to your credit card when your myHalo system is installed or 7 days after your myHalo system has shipped, whichever comes first. The monthly recurring charge will begin the 1st day of the month AFTER the prorated charge.</span>  
  </p>
</div>
<% end -%>


<% if @confirmation.blank? || (@product == "clip") %>
<div id="halo_clip_box" style="display: <%= @confirmation ? 'block' : 'none' %>; float:left; margin-top: 20px; width: 100%">
  <table width="100%" class="colored">
    <tr><th>Shopping cart items</th><th style="text-align:right;">Price</th></tr>
    <tr><td>Deposit</td><td style="text-align:right;"><%= @clip_tariff.blank? ? '?' : USD_value(@clip_tariff.deposit) %></td></tr>
    <% unless @clip_tariff.blank? || @clip_tariff.months_advance.to_i.zero? %>
      <tr class="altrow"><td><%= @clip_tariff.blank? ? '?' : pluralize(@clip_tariff.months_advance, "month") %> advance (<%= @clip_tariff.blank? ? '?' : USD_value(@clip_tariff.monthly_recurring) %> x <%= @clip_tariff.blank? ? '?' : @clip_tariff.months_advance %>)</td><td style="text-align:right;"><%= @clip_tariff.blank? ? '?' : USD_value(@clip_tariff.advance_charge) %></td></tr>
    <% end -%>
    <% unless @clip_tariff.blank? || @clip_tariff.months_trial.to_i.zero? %>
      <tr class="altrow red"><td><%= @clip_tariff.blank? ? '?' : pluralize(@clip_tariff.months_trial, "month") %> trial (Free <%= @clip_tariff.blank? ? '?' : USD_value(@clip_tariff.monthly_recurring) %> x <%= @clip_tariff.blank? ? '?' : @clip_tariff.months_trial %>)</td><td style="text-align:right;"><%= USD_value(0) %></td></tr>
    <% end -%>
    <tr><td>Shipping</td><td style="text-align:right;"><%= @clip_tariff.blank? ? '?' : USD_value(@clip_tariff.shipping) %></td></tr>
    <tr class="altrow"><td style="text-align:right;">Total*</td><td style="text-align:right;">
      <% if @confirmation %>
      <%= f.hidden_field "cost", :disabled => true %>
      <% end -%>
      <strong><%= @clip_tariff.blank? ? '?' : USD_value(@clip_tariff.upfront_charge) %></strong>
    </td></tr>
  </table>
  <p>
    <!-- *Note: Recurring monthly charge of <b><%= @clip_tariff.blank? ? '?' : USD_value(@clip_tariff.monthly_recurring) %>/mo</b> will begin <%= @clip_tariff.blank? ? '?' : @clip_tariff.recurring_delay.months.from_now.to_s(:day_date) %> -->
    <span class="tiny">*<b>Note</b>: A one-time prorated charge will be charged to your credit card when your myHalo system is installed or 7 days after your myHalo system has shipped, whichever comes first. The monthly recurring charge will begin the 1st day of the month AFTER the prorated charge.</span>  
  </p>
</div>
<% end -%>

<br/>
