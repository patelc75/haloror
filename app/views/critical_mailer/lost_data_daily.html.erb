<% lost_data_hash = DailyReports.job_lost_data; users = User.find(:all, :order => "id asc") %>
<% total_num = 0; total_duration = 0;%>
<% users.each do |user| %>
<% 	total_user_duration 	= 0; total_user_num	= 0; lost_data = lost_data_hash[user.id]; user[:lost_data] = lost_data;
		lost_data.each do |reading|	
	 	  total_user_num += 1; duration = (reading.end_time - reading.begin_time).seconds; total_user_duration += duration; 
			user[:total_user_num] = total_user_num; user[:total_user_duration] = total_user_duration;
	  end 
	  total_duration += total_user_duration; total_num += total_user_num;  
	end %>
Lost data (All times are in UTC timezone)
Summary Total Occurrences:  <%= total_num      %>
Summary Total Duration:     <%= total_duration %>s
<% users.each do |user| %> 
<% if !user[:total_user_num].nil? %>
	Total Occurrences(<%= user.name   %>): <%= user[:total_user_num]%>
	Total Duration(<%= user.name %>):      <%= user[:total_user_duration]%>s 
	<%  user[:lost_data].each do |reading| %>	
		Start:    <%= reading.begin_time.to_s() %>
		End:      <%= reading.end_time.to_s() %>
		Duration: <%= (reading.end_time - reading.begin_time).seconds %>s
<% end %>
<% end %>
<% end %>