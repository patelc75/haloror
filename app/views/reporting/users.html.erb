<%= render :partial => 'nav_config' %>

<div class="span-24 last">
  <%= '<font color="red">' + flash[:notice] + '</font><br><br>' if flash[:notice] %>

<h3>Users table</h3>
<div class="span-11 box">
  <form id="group_form_id" action="/reporting/users" method="GET">
  <div class="span-8 last">
    Select <label for="group_name">Group</label>:
    <%= select_tag 'group_name', options_for_select( [['All Groups','']] + @groups.collect {|e| [e.name, e.name] }, (@group.name unless @group.blank?)) %>
    <br />
    <div class="prepend-2">
      <%= radio_button_tag "user_subset", "all", @user_subset != 'installed' %><%= label_tag "All users" %>
      <%= radio_button_tag "user_subset", "installed", @user_subset == 'installed' %><%= label_tag "Installed users" %>
    </div>
  </div>
  <div class="span-3">
    <%= submit_tag "Search", :class => "button green-button" %>
  </div>
  <div class=" span-11 tiny">Please select a group, click the user subset required and press 'Search' button</div>
</form>
</div>
<div class="span-11 box last">
  <%= render :partial => 'search_users' %>
</div>
</div>

<center><%= will_paginate @users %></center>
<div id="user-table" class="table bluegrey">
    <%= render :partial => 'user_table', :locals => {:users => @users, :sortby => 'id', :reverse => false} %>
</div>

<div><%= will_paginate @users %></div>
<div id="range_test_launcher"></div>

<script language="javascript">

function start_range_test(user_id){
  url = "/installs/start_range_test_only/?user_id=" + user_id
  new Ajax.Request(url, {
    method: 'get'});
  }

function stop_range_test(user_id){
  url = "/installs/stop_range_test_only/?user_id=" + user_id
  new Ajax.Request(url, {
    method: 'get'});
  }

</script>
